{% extends "erp_base_layout.html" %}
{% block title %}Credit Sales - ERP{% endblock %}
{% block extra_css %}
<style>
:root{--wine:#732C3F;--wine-light:#8d3a4f;--bg:#f8f9fa;--text:#1A1A1A;--sub:#6B7280;--border:#e5e7eb;--radius:12px}
.page-wrapper{background:var(--bg);min-height:100vh;padding:24px 20px}
.page-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;gap:16px}
.page-header h1{font-size:28px;font-weight:700;color:var(--text);display:flex;align-items:center;gap:12px;margin:0}
.page-header h1 i{color:var(--wine)}
.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:24px}
.stat-card{background:#fff;border-radius:var(--radius);padding:20px;box-shadow:0 1px 3px rgba(0,0,0,0.1);display:flex;align-items:center;gap:16px}
.stat-icon{width:48px;height:48px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:24px}
.stat-icon.primary{background:rgba(115,44,63,0.1);color:var(--wine)}
.stat-icon.success{background:rgba(16,185,129,0.1);color:#10b981}
.stat-icon.warning{background:rgba(245,158,11,0.1);color:#f59e0b}
.stat-icon.danger{background:rgba(220,38,38,0.1);color:#dc2626}
.stat-info .value{font-size:24px;font-weight:700;color:var(--text);margin-bottom:4px}
.stat-info .label{font-size:13px;color:var(--sub);font-weight:500}
.tab-nav{background:#fff;border-radius:var(--radius);padding:8px;display:flex;gap:8px;margin-bottom:24px;box-shadow:0 1px 3px rgba(0,0,0,0.1)}
.tab-btn{flex:1;padding:12px 20px;border:none;background:transparent;color:var(--sub);font-size:15px;font-weight:600;border-radius:8px;cursor:pointer;transition:all 0.2s;display:flex;align-items:center;justify-content:center;gap:8px}
.tab-btn:hover{background:#f3f4f6}
.tab-btn.active{background:var(--wine);color:white}
.tab-content{display:none}
.tab-content.active{display:block}
.content-card{background:#fff;border-radius:var(--radius);padding:24px;box-shadow:0 1px 3px rgba(0,0,0,0.1)}
.content-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:12px}
.content-header h2{font-size:20px;font-weight:600;color:var(--text);margin:0}
.header-actions{display:flex;gap:12px;align-items:center}
.btn{border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;padding:10px 20px;display:inline-flex;align-items:center;gap:8px;transition:all 0.2s;text-decoration:none}
.btn-primary{background:var(--wine);color:#fff}
.btn-primary:hover{background:var(--wine-light)}
.btn-secondary{background:#f3f4f6;color:var(--text)}
.btn-secondary:hover{background:#e5e7eb}
.btn-sm{padding:6px 12px;font-size:13px}
.search-bar{width:100%;max-width:400px;padding:10px 16px;border:1.5px solid var(--border);border-radius:8px;font-size:14px;transition:all 0.2s}
.search-bar:focus{outline:none;border-color:var(--wine)}
.data-table{width:100%;border-collapse:collapse;margin-top:16px}
.data-table thead{background:#f8f9fa}
.data-table th{padding:12px 16px;text-align:left;font-size:13px;font-weight:600;color:var(--sub);text-transform:uppercase;letter-spacing:0.5px;border-bottom:2px solid var(--border)}
.data-table td{padding:14px 16px;border-bottom:1px solid var(--border);font-size:14px;color:var(--text)}
.data-table tbody tr:hover{background:#f8f9fa}
.badge{display:inline-block;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:600}
.badge-success{background:rgba(16,185,129,0.1);color:#10b981}
.badge-warning{background:rgba(245,158,11,0.1);color:#f59e0b}
.badge-danger{background:rgba(220,38,38,0.1);color:#dc2626}
.action-btns{display:flex;gap:8px}
.icon-btn{width:32px;height:32px;border:none;background:#f3f4f6;border-radius:6px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.2s}
.icon-btn:hover{background:var(--wine);color:white}
.empty-state{text-align:center;padding:60px 20px;color:var(--sub)}
.empty-state i{font-size:48px;margin-bottom:16px;opacity:0.5}
.empty-state h3{font-size:18px;margin-bottom:8px;color:var(--text)}
.empty-state p{font-size:14px}
@media(max-width:768px){.page-wrapper{padding:16px 12px}.page-header{flex-direction:column;align-items:flex-start}.tab-nav{flex-direction:column}.stats-grid{grid-template-columns:1fr}.content-header{flex-direction:column;align-items:flex-start}.search-bar{max-width:100%}.data-table{font-size:13px}.data-table th,.data-table td{padding:10px 12px}}
</style>
{% endblock %}
{% block content %}
<div class="page-wrapper">
<div class="page-header"><h1><i data-lucide="clock"></i> Credit Sales</h1></div>
<div class="stats-grid">
<div class="stat-card"><div class="stat-icon primary"><i data-lucide="file-text"></i></div><div class="stat-info"><div class="value" id="totalCredit">₹0</div><div class="label">Total Credit</div></div></div>
<div class="stat-card"><div class="stat-icon success"><i data-lucide="check-circle"></i></div><div class="stat-info"><div class="value" id="collected">₹0</div><div class="label">Collected</div></div></div>
<div class="stat-card"><div class="stat-icon warning"><i data-lucide="clock"></i></div><div class="stat-info"><div class="value" id="pending">₹0</div><div class="label">Pending</div></div></div>
<div class="stat-card"><div class="stat-icon danger"><i data-lucide="alert-circle"></i></div><div class="stat-info"><div class="value" id="overdue">₹0</div><div class="label">Overdue</div></div></div>
</div>
<div class="tab-nav">
<button class="tab-btn active" data-tab="all"><i data-lucide="list"></i>All Credit Sales</button>
<button class="tab-btn" data-tab="pending"><i data-lucide="clock"></i>Pending</button>
<button class="tab-btn" data-tab="overdue"><i data-lucide="alert-circle"></i>Overdue</button>
<button class="tab-btn" data-tab="collected"><i data-lucide="check-circle"></i>Collected</button>
</div>
<div class="tab-content active" id="all-tab">
<div class="content-card">
<div class="content-header"><h2>All Credit Sales</h2>
<div class="header-actions">
<input type="text" class="search-bar" id="searchAll" placeholder="Search...">
<button class="btn btn-secondary" onclick="loadCredit()"><i data-lucide="refresh-cw"></i>Refresh</button>
</div></div>
<table class="data-table"><thead><tr><th>Invoice No.</th><th>Customer</th><th>Date</th><th>Amount</th><th>Paid</th><th>Balance</th><th>Due Date</th><th>Status</th><th>Actions</th></tr></thead>
<tbody id="allCreditBody"><tr><td colspan="9"><div class="empty-state"><i data-lucide="inbox"></i><h3>No Credit Sales</h3><p>Credit sales will appear here</p></div></td></tr></tbody></table>
</div></div>
<div class="tab-content" id="pending-tab">
<div class="content-card">
<div class="content-header"><h2>Pending Collections</h2>
<div class="header-actions"><input type="text" class="search-bar" id="searchPending" placeholder="Search..."></div></div>
<table class="data-table"><thead><tr><th>Customer</th><th>Invoice No.</th><th>Amount</th><th>Due Date</th><th>Actions</th></tr></thead>
<tbody id="pendingBody"><tr><td colspan="5"><div class="empty-state"><i data-lucide="clock"></i><h3>No Pending</h3><p>All collections are up to date</p></div></td></tr></tbody></table>
</div></div>
<div class="tab-content" id="overdue-tab">
<div class="content-card">
<div class="content-header"><h2>Overdue Payments</h2>
<div class="header-actions"><input type="text" class="search-bar" id="searchOverdue" placeholder="Search..."></div></div>
<table class="data-table"><thead><tr><th>Customer</th><th>Invoice No.</th><th>Amount</th><th>Due Date</th><th>Days Overdue</th><th>Actions</th></tr></thead>
<tbody id="overdueBody"><tr><td colspan="6"><div class="empty-state"><i data-lucide="alert-circle"></i><h3>No Overdue</h3><p>Great! No overdue payments</p></div></td></tr></tbody></table>
</div></div>
<div class="tab-content" id="collected-tab">
<div class="content-card">
<div class="content-header"><h2>Collected Payments</h2>
<div class="header-actions"><input type="text" class="search-bar" id="searchCollected" placeholder="Search..."></div></div>
<table class="data-table"><thead><tr><th>Customer</th><th>Invoice No.</th><th>Amount</th><th>Collected Date</th><th>Actions</th></tr></thead>
<tbody id="collectedBody"><tr><td colspan="5"><div class="empty-state"><i data-lucide="check-circle"></i><h3>No Collections</h3><p>Collected payments will appear here</p></div></td></tr></tbody></table>
</div></div>
</div>
<script>
let creditData=[];
document.querySelectorAll('.tab-btn').forEach(btn=>{btn.addEventListener('click',()=>{const tab=btn.dataset.tab;document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));btn.classList.add('active');document.querySelectorAll('.tab-content').forEach(c=>c.classList.remove('active'));document.getElementById(`${tab}-tab`).classList.add('active');lucide.createIcons()})});
async function loadCredit(){try{const response=await fetch('/api/erp/credit-sales');const data=await response.json();if(data.success){creditData=data.data||[];updateStats()}}catch(e){console.error('Error:',e)}}
function updateStats(){document.getElementById('totalCredit').textContent='₹0';document.getElementById('collected').textContent='₹0';document.getElementById('pending').textContent='₹0';document.getElementById('overdue').textContent='₹0'}
document.addEventListener('DOMContentLoaded',function(){loadCredit();lucide.createIcons()});
</script>
{% endblock %}
